;(function(a,n,h,p){a.Youxi=a.Youxi||{};var l={flickr:function(b,c){a.fn.jflickrfeed&&b.find(".flickr-feed").each(function(){var d=a(this).data("flickr-id"),e=a(this).data("limit")||9;a('<ul class="feed-list"/>').jflickrfeed(a.extend(!0,c||{},{qstrings:{id:d},limit:e})).prependTo(this)})},twitter:function(b,c){a.fn.miniTweets&&b.find(".twitter-feed").each(function(){a('<ul class="feed-list"/>').miniTweets(a.extend(!0,c||{},a(this).data())).prependTo(this)})},leafletmap:function(b,c){"undefined"!=typeof L&&L.map&&b.find(".leaflet-map").each(function(){var d=a.data(this,"leaflet");if(!d){var e=a(this).data("leaflet-options")||{},b,g=e.markers||[],c=a(this).data("mapbox-access-token")||"";delete e.markers;c&&(d=L.map(this,e),e.scaleControl&&L.control.scale().addTo(d),L.tileLayer("https://api.tiles.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token={accessToken}",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery &copy; <a href="http://mapbox.com">Mapbox</a>',accessToken:c}).addTo(d),g.forEach(function(a,e){b=L.marker([a.lat,a.lng]).addTo(d);a.description&&b.bindPopup(a.description)}),a.data(this,"leaflet",d))}})},instagram:function(b,c){b.find(".instagram-feed").each(function(){var d=a(this),b=a.extend({count:8,imageSize:"thumbnail"},d.data());a.ajax({type:"post",url:_youxiWidgets.ajaxUrl,dataType:"json",data:{action:c.ajaxAction,instagram:b}}).done(function(c){c.success&&a.isArray(c.data)?a('<ul class="feed-list"/>').html(a.map(c.data,function(a){if(a.images&&a.images.hasOwnProperty(b.imageSize)){var d=a.link||"#",c=a.caption&&a.caption.text||"";a=a.images.hasOwnProperty(b.imageSize)?a.images[b.imageSize]:a.images.thumbnail;if(a.url&&a.width&&a.height){var k=a.url.replace(/^https?:\/\//,"//");return'<li><a href="'+d+'" title="'+c+'" target="_blank"><img width="'+a.width+'" height="'+a.height+'" src="'+k+'" alt="'+c+'"></a></li>'}}})).prependTo(d):d.html('<div class="alert alert-danger">'+(c.data&&c.data.error_message||"")+"</div>")})})},rotatingquotes:function(b,c){var d=function(a){var b=a.fadeOut(500).next().fadeIn(500);this.append(a).animate({height:b.outerHeight(!0)},500);return b};b.find(".rotating-quotes").each(function(){var b=a(this),c=b.data("duration")||6E3,g=b.children("blockquote"),f=g.first();f.nextAll().hide();setTimeout(function(){b.css({position:"relative",height:b.outerHeight()});g.css("position","absolute");f=d.call(b,f);b.data("rotatingquotes",setInterval(function(){f=d.call(b,f)},c))},c)})}},m={leafletmap:function(b,c){b.find(".leaflet-map").each(function(){var b=a.data(this,"leaflet");b&&b.remove();a.removeData(this,"leaflet")})},rotatingquotes:function(b,c){b.find(".rotating-quotes").each(function(){var b=a(this).data("rotatingquotes");b&&clearInterval(b)})}};a.extend(a.Youxi,{Widgets:{setup:function(b){b=a(b||h);a.each(l,function(c,d){_youxiWidgets.hasOwnProperty(c)&&a.isFunction(d)&&d(b,_youxiWidgets[c])})},teardown:function(b){b=a(b||h);a.each(m,function(c,d){_youxiWidgets.hasOwnProperty(c)&&a.isFunction(d)&&d(b,_youxiWidgets[c])})}}});a(function(){a.Youxi.Widgets.setup()})})(jQuery,window,document);